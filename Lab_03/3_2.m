clear all;
T = .7*4;

E5 = 56;
D5sh = 55;
D5 = 54;
C5 = 52;
B4 = 51;
A4 = 49;
G4sh = 48;
C4 = 40;
E4 = 44;
G4 = 47;
A3 = 37;
G3sh = 36;
E3 = 32;
A2 = 25;
E2 = 20;
F5 = 57;
E6 = 68;
F4 = 45;
C3 = 28;
G3 = 35;
C4 = 40;
G2 = 23;
B3 = 39;

pp = 0.125;
p = 0.25;
mf = 1;


keys = [ ...
            E5 D5sh ... 
            E5 D5sh E5 B4 D5 C5 ...
            A4 0 C4 E4 A4 ...
            B4 0 E4 G4sh B4 ...
            C5 0 E4 E5 D5sh ...
            ... %end of line 1
            E5 D5sh E5 B4 D5 C5 ...
            A4 0 C4 E4 A4 ...
            B4 0 E4 C5 B4 ...
            A4 0 B4 C5 D5 ...
            E5 G4 F5 E5 ...
            ... %end of line 2
            D5 F4 E5 D5 ...
            C5 E4 D5 C5 ...
            B4 0 E4 E5 0 ...
            0 E5 E6 0 0 D5sh ...
            E5 0 0 D5sh E5 D5sh ...
            ... %end of line 3
            E5 D5sh E5 B4 D5 C5 ...
            A4 0 C4 E4 A4 ...
            B4 0 E4 G4sh B4 ...
            C5 0 E4 E5 D5sh ...
            E5 D5sh E5 B4 D5 C5 ...
            ... %end of line 4
            A4 0 C4 E4 A4 ...
            B4 0 E4 C5 B4 ...
            A4 0 ...
            ];
        
volume = [ ...
            pp pp ... 
            pp*2 pp*4 pp*6 pp*6 pp*4 pp*2 ...
            pp pp pp pp pp ...
            pp pp pp pp pp ...
            pp pp pp pp pp ...
            ... %end of line 1
            pp*2 pp*4 pp*6 pp*6 pp*4 pp*2 ...
            pp pp pp pp pp ...
            pp pp pp pp pp ...
            pp pp mf mf mf ...
            mf mf mf mf ...
            ... %end of line 2
            mf mf mf mf ...
            mf mf*0.9 mf*0.8 mf*0.6 ...
            p p p p p ...
            p p p p p p ...
            p p p pp pp pp ...
            ... %end of line 3
            pp*2 pp*4 pp*6 pp*6 pp*4 pp*2 ...
            pp pp pp pp pp ...
            pp pp pp pp pp ...
            pp pp pp pp pp ...
            pp*2 pp*4 pp*6 pp*6 pp*4 pp*2 ...
            ... %end of line 4
            pp pp pp pp pp ...
            pp pp pp pp pp ...
            pp pp ...
            ];

dur = [ ...
    (1/16*T*ones(1,2)) ...
    (1/16*T*ones(1,6)) ...
    (1/8*T*ones(1,1)) (1/16*T*ones(1,4)) ...
    (1/8*T*ones(1,1)) (1/16*T*ones(1,4)) ...
    (1/8*T*ones(1,1)) (1/16*T*ones(1,4)) ...
    ... %end of line 1
    (1/16*T*ones(1,6)) ...
    (1/8*T*ones(1,1)) (1/16*T*ones(1,4)) ...
    (1/8*T*ones(1,1)) (1/16*T*ones(1,4)) ...
    (1/8*T*ones(1,1)) (1/16*T*ones(1,4)) ...
    ((1/8+1/16)*T*ones(1,1)) (1/16*T*ones(1,3)) ...
    ... %end of line 2
    ((1/8+1/16)*T*ones(1,1)) (1/16*T*ones(1,3)) ...
    ((1/8+1/16)*T*ones(1,1)) (1/16*T*ones(1,3)) ...
    (1/8*T*ones(1,1)) (1/16*T*ones(1,4)) ...
    (1/16*T*ones(1,6)) ...
    (1/16*T*ones(1,6)) ...
    ... %end of line 3
    (1/16*T*ones(1,6)) ...
    (1/8*T*ones(1,1)) (1/16*T*ones(1,4)) ...
    (1/8*T*ones(1,1)) (1/16*T*ones(1,4)) ...
    (1/8*T*ones(1,1)) (1/16*T*ones(1,4)) ...
    (1/16*T*ones(1,6)) ...
    ... %end of line 4
    (1/8*T*ones(1,1)) (1/16*T*ones(1,4)) ...
    (1/8*T*ones(1,1)) (1/16*T*ones(1,4)) ...
    (1/4*T*ones(1,1)) (1/8*T*ones(1,1)) ...
    ... %end of line 5
    ];

fs = 11025;
xx = zeros(1,sum(dur)*fs+1);
n1 = 1;
for kk = 1:length(keys)
    keynum = keys(kk);
    
    tone = note(keynum, dur(kk), volume(kk));
    
    n2 = n1 + length(tone) - 1;
    xx(n1:n2) = xx(n1:n2) + tone;
    n1 = n2;
end

keys =    [ ...
            0 ...
            0 ...
            A2 E3 A3 0 0 ...
            E2 E3 G3sh 0 0 ...
            A2 E3 A3 0 0 ...
            ... %end of line 1
            0 ...
            A2 E3 A3 0 0 ...
            E2 E3 G3sh 0 0 ...
            A2 E3 A3 0 0 ...
            C3 G3 C4 0 0 ...
            ... %end of line 2
            G2 G3 B3 0 0 ...
            A2 E3 A3 0 0 ...
            E2 E3 E4 0 E4 ...
            E5 0 0 D5sh E5 0 ...
            0 D5sh E5 0 0 ...
            ... %end of line 3
            0 ...
            A2 E3 A3 0 0 ...
            E2 E3 G3sh 0 0 ...
            A2 E3 A3 0 0 ...
            0 ...
            ... %end of line 4
            A2 E3 A3 0 0 ...
            E2 E3 G3sh 0 0 ...
            A2 E3 A3 0 0 ...
            ... %end of line 5
            ];
        
volume =    [ ...
            pp ...
            pp ...
            pp pp pp pp pp ...
            pp pp pp pp pp ...
            pp pp pp pp pp ...
            ... %end of line 1
            pp ...
            pp pp pp pp pp ...
            pp pp pp pp pp ...
            pp pp pp mf mf ...
            mf mf mf mf mf ...
            ... %end of line 2
            mf mf mf mf mf ...
            mf mf*0.9 mf*0.8 mf mf ...
            p p p p p ...
            p p p p p p ...
            p p p p p ...
            ... %end of line 3
            pp ...
            pp pp pp pp pp ...
            pp pp pp pp pp ...
            pp pp pp pp pp ...
            pp ...
            ... %end of line 4
            pp pp pp pp pp ...
            pp pp pp pp pp ...
            pp pp pp pp pp ...
            ... %end of line 5
            ];

dur = [ ...
        (1/8*T*ones(1,1)) ...
        (3/8*T*ones(1,1)) ...
        (1/16*T*ones(1,4)) (1/8*T*ones(1,1)) ...
        (1/16*T*ones(1,4)) (1/8*T*ones(1,1)) ...
        (1/16*T*ones(1,4)) (1/8*T*ones(1,1)) ...
        ... %end of line 1
        (3/8*T*ones(1,1)) ...
        (1/16*T*ones(1,4)) (1/8*T*ones(1,1)) ...
        (1/16*T*ones(1,4)) (1/8*T*ones(1,1)) ...
        (1/16*T*ones(1,4)) (1/8*T*ones(1,1)) ...
        (1/16*T*ones(1,4)) (1/8*T*ones(1,1)) ...
        ... %end of line 2
        (1/16*T*ones(1,4)) (1/8*T*ones(1,1)) ...
        (1/16*T*ones(1,4)) (1/8*T*ones(1,1)) ...
        (1/16*T*ones(1,3)) (1/8*T*ones(1,1)) (1/16*T*ones(1,1)) ...
        (1/16*T*ones(1,6)) ...
        (1/16*T*ones(1,4)) (1/8*T*ones(1,1)) ...
        ... %end of line 3
        (3/8*T*ones(1,1)) ...
        (1/16*T*ones(1,4)) (1/8*T*ones(1,1)) ...
        (1/16*T*ones(1,4)) (1/8*T*ones(1,1)) ...
        (1/16*T*ones(1,4)) (1/8*T*ones(1,1)) ...
        (3/8*T*ones(1,1)) ...
        ... %end of line 4
        (1/16*T*ones(1,4)) (1/8*T*ones(1,1)) ...
        (1/16*T*ones(1,4)) (1/8*T*ones(1,1)) ...
        (1/16*T*ones(1,4)) (1/8*T*ones(1,1)) ...
        ];
fs = 11025;
yy = zeros(1,sum(dur)*fs+1);
n1 = 1;
for kk = 1:length(keys)
    keynum = keys(kk);
    
    tone = note(keynum, dur(kk), volume(kk));
    
    n2 = n1 + length(tone) - 1;
    yy(n1:n2) = yy(n1:n2) + tone;
    n1 = n2;
end
 

soundsc( xx+yy, fs )